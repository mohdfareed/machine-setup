# theme
ZSH_THEME="common"

# plugins
plugins=(
    colored-man-pages # adds colors to man pages
    osx               # provides a few utilities on macOS
)

# load aliases and functions
source $ZDOTDIR/.aliases

# options
setopt CORRECT_ALL # offer to correct commands and arguments

# zsh history and session history files
export HISTFILE="$XDG_CACHE_HOME/zsh/zsh_history"
export SHELL_SESSION_DIR="$XDG_CACHE_HOME/zsh/zsh_sessions"
export SHELL_SESSION_HISTFILE="$SHELL_SESSION_DIR/$TERM_SESSION_ID.history"
export SHELL_SESSION_FILE="$SHELL_SESSION_DIR/$TERM_SESSION_ID.session"
mkdir -m 700 -p "$SHELL_SESSION_DIR"
rm -f -d "$ZDOTDIR/.zsh_sessions"

# rbenv
if [[ -d "/usr/local/Cellar/rbenv" ]] ; then
    export GEM_SPEC_CACHE="$XDG_CACHE_HOME/gem"
    export BUNDLE_USER_CONFIG="$XDG_CONFIG_HOME/bundle"
    export BUNDLE_USER_CACHE="$XDG_CACHE_HOME/bundle"
    export BUNDLE_USER_PLUGIN="$XDG_DATA_HOME/bundle"
    export RBENV_ROOT="$XDG_DATA_HOME/rbenv"
    export SOLARGRAPH_CACHE="$XDG_CACHE_HOME/solargraph"
    eval "$(rbenv init -)"
fi

# nvm
if [[ -d "/usr/local/Cellar/nvm" ]] ; then
    export NVM_DIR="$XDG_DATA_HOME/nvm" # nvm directory
    export NVM_LAZY=1                   # let oh-my-zsh lazy evaluate nvm

    plugins+=(nvm)  # lazy evaluate nvm and load tab completions
    plugins+=(node) # adds node-docs function
fi

# load oh-my-zsh
source $ZSH/oh-my-zsh.sh
# load zsh syntax highlighting
source $(brew --prefix)/share/zsh-syntax-highlighting\
/zsh-syntax-highlighting.zsh
